"use strict";var ProspectCue=(()=>{var T=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var S=(a,t,n)=>t in a?T(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,j=(a,t)=>{for(var n in t||(t={}))I.call(t,n)&&S(a,n,t[n]);if(P)for(var n of P(t))Z.call(t,n)&&S(a,n,t[n]);return a};var A=(a,t)=>{for(var n in t)T(a,n,{get:t[n],enumerable:!0})},J=(a,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of K(t))!I.call(a,i)&&i!==n&&T(a,i,{get:()=>t[i],enumerable:!(o=Y(t,i))||o.enumerable});return a};var Q=a=>J(T({},"__esModule",{value:!0}),a);var w=(a,t,n)=>(S(a,typeof t!="symbol"?t+"":t,n),n);var l=(a,t,n)=>new Promise((o,i)=>{var r=d=>{try{u(n.next(d))}catch(f){i(f)}},c=d=>{try{u(n.throw(d))}catch(f){i(f)}},u=d=>d.done?o(d.value):Promise.resolve(d.value).then(r,c);u((n=n.apply(a,t)).next())});var ae={};A(ae,{addAddressButtons:()=>M,addContactSearchBox:()=>U,addTagElements:()=>H,appendTagLink:()=>O,appended:()=>g,checkAddNewTag:()=>h,colorConsole:()=>s,constants:()=>D,getAddressDivs:()=>L,processContactDivs:()=>F,runContactPageCustomizations:()=>C,startProspectCueCustomizations:()=>W,wait:()=>x});function L(a){var n;let t;for(let o of a)if(o.textContent&&o.textContent.trim()==="Street Address"){if(t=(n=o.closest(".pt-3 > div"))==null?void 0:n.children,!t){s("could not find addressDivChildren","red");return}let i={streetLabel:o,streetDiv:t[1],cityDiv:t[2],stateDiv:t[4],zipDiv:t[5],addressDivChildren:t};return g.addressDivs=i,i}}function s(a,t,n){let o={red:"#f1889a",green:"#6DECB9",blue:"#88FFF7",yellow:"#FFF6BF",orange:"#f19684"};t!=null||(t="blue"),console.log(`%c \u{1FA90} ${a}`,`font-size: 13px; color: ${o[t]} `,n)}var x={};A(x,{waitForElement:()=>m,waitForManyElements:()=>p,waitForTextContent:()=>X});var R=a=>a.selector!==void 0;function m(a){return a.logMessage&&s(a.logMessage),new Promise(t=>{let n=R(a)?document.querySelector(a.selector):a.element;n&&t(n);let o=new MutationObserver(i=>{let r=R(a)?document.querySelector(a.selector):a.element;r&&(t(r),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})}function p(a,t=1,n){return s(`waiting for ${t} children on ${a} ${n?`with textContent ${n}`:""}`),new Promise(o=>{let i=document.querySelectorAll(a);i.length>=t&&(s(`${a} already has at least ${t} nodes...`,"green",i),o(i));let r=new MutationObserver(c=>{let u=document.querySelectorAll(a);u.length>=t&&(s(`${a} now has at least ${t} nodes...`,"green",u),o(u),r.disconnect())});r.observe(document.body,{childList:!0,subtree:!0})})}function X(a,t){return new Promise(n=>{let o=document.querySelectorAll(a);for(let r=0;r<o.length;r++){let c=o[r];c.textContent===t&&(s(`found textContent immediately: ${t}...`,"green",c),n(c))}let i=new MutationObserver(r=>{let c=document.querySelectorAll(a);for(let u=0;u<c.length;u++){let d=c[u];d.textContent===t&&(s(`found textContent: ${t}...`,"green",d),n(d),i.disconnect())}});i.observe(document.body,{childList:!0,subtree:!0})})}function M(){return l(this,null,function*(){let a=yield p(".hl_contact-details-left .form-group .label",20),t=L(a);if(!t){s("no address divs found, returning from startAddButtons","red");return}s("address divs found... inserting map buttons","green"),yield ee(t)})}function ee(a){return l(this,null,function*(){var d,f,_,N,q,$,z,B;if(document.querySelectorAll(".zg-map-btns").length>0){s("map buttons already present, returning","yellow");return}let t=document.createElement("div");t.id="mapLinks",t.className="mapContainerZG",t.style.display="inline-flex";let{streetLabel:n}=a;n.style.display="inline-flex",n.style.width="50%";let o={street:(f=(d=a.streetDiv.querySelector("input"))==null?void 0:d.value)!=null?f:null,city:(N=(_=a.cityDiv.querySelector("input"))==null?void 0:_.value)!=null?N:null,state:($=(q=a.stateDiv.querySelector("input"))==null?void 0:q.value)!=null?$:null,zip:(B=(z=a.stateDiv.querySelector("input"))==null?void 0:z.value)!=null?B:null},i=encodeURIComponent(Object.values(o).filter(b=>b!==null).join(" ")),c=`<span class="zillowTitle">Search:</span><a href="https://www.google.com/search?q=${Object.values(o).filter(b=>b!==null).map(b=>encodeURIComponent(b)).join("+")}" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" class="zg-map-btns"></a>`,u=`<a href="https://www.zillow.com/homes/for_sale/${i}_rb" target="_blank" id="zillowLink"><img src="https://www.zillow.com/apple-touch-icon.png" class="zg-map-btns"></a>`;t.innerHTML=c+u,n.insertAdjacentElement("afterend",t)})}function V(){return l(this,null,function*(){if(document.getElementById("section-toggle")){s("section toggle already present, returning","yellow");return}let a=document.createElement("input");a.type="checkbox",a.id="section-toggle",a.className="focus:ring-curious-blue-500 h-5 w-5 text-curious-blue-600 border-gray-300 rounded mr-2 disabled:opacity-50";let t=document.createElement("label");t.htmlFor="section-toggle",t.innerText="Toggle Sections",t.style.color="var(--gray-600)",t.className="mb-0 mr-4",a.addEventListener("change",te);let n=document.createElement("div");n.appendChild(a),n.appendChild(t),n.style.display="inline-flex";let{firstElementChild:o}=yield m({selector:".hl_contact-details-left .h-full.overflow-y-auto"});if(!o){s("parent node not found","red");return}o.className+=" text-xs !text-gray-600",o.insertBefore(n,o.firstChild)})}function te(a){var n,o;if(a.target.checked)for(let i of g.contactDivTriggers)((n=i.parentElement)==null?void 0:n.getAttribute("data-open"))==="true"&&i.click();else for(let i of g.contactDivTriggers)((o=i.parentElement)==null?void 0:o.getAttribute("data-open"))==="false"&&i.click()}var D={};A(D,{ACTIONS_DIVS_SELECTOR:()=>E,CONTACT_DIVS_SELECTOR:()=>y,CONTACT_SECTION_LABELS_SELECTOR:()=>ne});var y=".hl_contact-details-left > div > .h-full.overflow-y-auto > .py-3.px-3",E=".hl_contact-details-left > div > .h-full.overflow-y-auto > .bg-gray-100 > .py-3.px-3",ne=".hl_contact-details-left .form-group .label";var v=class{constructor(t){w(this,"settings");w(this,"dialogSupported");w(this,"dialog");w(this,"elements");w(this,"focusable");w(this,"hasFormData");this.settings=j({accept:t.accept||"OK",bodyClass:t.bodyClass||"dialog-open",cancel:t.cancel||"Cancel"},t),this.init()}collectFormData(t){let n={};return t.forEach((o,i)=>{typeof o=="string"&&(n.hasOwnProperty(i)?(Array.isArray(n[i])||(n[i]=[n[i]]),n[i].push(o)):n[i]=o)}),n}getFocusable(){var t;return[...(t=this.dialog)==null?void 0:t.querySelectorAll('button,[href],select,textarea,input:not([type="hidden"]),[tabindex]:not([tabindex="-1"])')]}init(){this.dialogSupported=typeof HTMLDialogElement=="function",this.dialog=document.createElement("dialog"),this.dialog.role="dialog",this.dialog.dataset.component=this.dialogSupported?"dialog":"no-dialog",this.dialog.innerHTML=`
    <form method="dialog" data-ref="form">
      <fieldset data-ref="fieldset" role="document">
        <legend data-ref="message" id="${Math.round(Date.now()).toString(36)}"></legend>
        <div data-ref="template"></div>
      </fieldset>
      <menu>
        <button${this.dialogSupported?"":' type="button"'} data-ref="cancel" value="cancel"></button>
        <button${this.dialogSupported?"":' type="button"'} data-ref="accept" value="default"></button>
      </menu>
      <audio data-ref="soundAccept"></audio>
      <audio data-ref="soundOpen"></audio>
    </form>`,document.body.appendChild(this.dialog),this.elements={},this.focusable=[],this.dialog.querySelectorAll("[data-ref]").forEach(t=>this.elements[t.dataset.ref]=t),this.dialog.setAttribute("aria-labelledby",this.elements.message.id),this.elements.cancel.addEventListener("click",()=>{this.dialog.dispatchEvent(new Event("cancel"))}),this.dialog.addEventListener("keydown",t=>{if(t.key==="Enter"&&(this.dialogSupported||t.preventDefault(),this.elements.accept.dispatchEvent(new Event("click"))),t.key==="Escape"&&this.dialog.dispatchEvent(new Event("cancel")),t.key==="Tab"){t.preventDefault();let n=this.focusable.length-1,o=this.focusable.indexOf(t.target);o=t.shiftKey?o-1:o+1,o<0&&(o=n),o>n&&(o=0),this.focusable[o].focus()}}),this.toggle()}open(t){let n=Object.assign({},this.settings,t);this.dialog.className=n.dialogClass||"",this.elements.accept.innerText=n.accept,this.elements.cancel.innerText=n.cancel,this.elements.cancel.hidden=n.cancel==="",this.elements.message.innerHTML=n.message,this.elements.soundAccept.src=n.soundAccept||"",this.elements.soundOpen.src=n.soundOpen||"",this.elements.target=n.target||"",this.elements.template.innerHTML=n.template||"",this.focusable=this.getFocusable(),this.hasFormData=this.elements.fieldset.elements.length>0,n.soundOpen&&this.elements.soundOpen.play(),this.toggle(!0),this.hasFormData?(this.focusable[0].focus(),this.focusable[0].select()):this.elements.accept.focus()}toggle(t=!1){this.dialogSupported&&t&&this.dialog.showModal(),this.dialogSupported||document.body.classList.toggle(this.settings.bodyClass,t),this.dialog.hidden=!t,this.elements.target&&!t&&this.elements.target.focus()}waitForUser(){return new Promise(t=>{this.dialog.addEventListener("cancel",()=>{this.toggle(),t(!1)},{once:!0}),this.elements.accept.addEventListener("click",()=>{let n=this.hasFormData?this.collectFormData(new FormData(this.elements.form)):!0;this.elements.soundAccept.getAttribute("src").length>0&&this.elements.soundAccept.play(),this.toggle(),t(n)},{once:!0})})}alert(t,n={target:e.target}){let o={target:n.target,cancel,message:t,template};return this.open(o),this.waitForUser()}confirm(t,n={target:e.target}){let o={target:n.target,message:t,template};return this.open(o),this.waitForUser()}prompt(t,n,o={target:e.target}){let i=`<label aria-label="${t}"><input type="text" name="prompt" value="${n}"></label>`,r={target:o.target,message:t,template:i};return this.open(r),this.waitForUser()}};function H(){return l(this,null,function*(){if(s("inserting tag link and tag alert...","blue"),g.tagsAdded=[],document.getElementById("tags-edit-container")){s("tags edit div already present","red");return}let a=yield p(E,3),t=null;for(let o=0;o<a.length;o++){let i=a[o],r=i.querySelector("span.text-sm.font-medium");if(r!=null&&r.textContent&&r.textContent.trim()==="Tags"){t=i.firstElementChild,s("Tags heading found-> ","orange",t);break}}if(t===null){s("tags section not found","red");return}let n=yield O(t);if(!n){s("new tag div not found","red");return}s("new tag div found -> ","green",n),h(n)})}function O(a){return l(this,null,function*(){if(document.getElementById("tags-edit"))return;let t=a.lastElementChild,n=document.createElement("div");n.id="tags-edit-container";let o=document.createElement("a");return o.addEventListener("click",i=>i.stopPropagation()),o.href=window.location.href.replace(/contacts.*/,"settings/tags"),o.target="_blank",o.innerHTML=`<span id="tags-edit" class="tags-edit">Edit Tags  <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
  width="12" height="12"
  viewBox="0 0 172 172"
  style=" fill:#000000;"><g transform=""><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><path d="" fill="none"></path><path d="" fill="none"></path><path d="" fill="none"></path><path d="" fill="none"></path><path d="" fill="none"></path><path d="" fill="none"></path><g><path d="M5.375,26.875h118.25v118.25h-118.25z" fill="#c2e8ff"></path><path d="M118.25,32.25v107.5h-107.5v-107.5h107.5M129,21.5h-129v129h129v-129z" fill="#357ded"></path><path d="M129,43v32.25h-21.5l0,-32.25z" fill="#c2e8ff"></path><path d="M118.25,21.5v21.5h-32.25v-21.5z" fill="#c2e8ff"></path><g fill="#357ded"><path d="M150.5,0h-64.5l21.5,21.5l-43,43l21.5,21.5l43,-43l21.5,21.5z"></path></g></g><path d="" fill="none"></path><path d="" fill="none"></path></g></g></svg>
  </span>`,n.prepend(o),a.insertBefore(n,t),a})}function h(a){return l(this,null,function*(){if(!a){s("new tag div not found, waiting for click","orange");let n=yield m({selector:".add-new"});return k(n)}let t=document.querySelector(".add-new");if(t)return s("add new section found","orange"),k(t);s("add new section not found, waiting for click","orange",a),a.addEventListener("click",n=>l(this,null,function*(){let o=document.querySelector(".add-new");if(!o){s("click occurred on tag div, but add new not present","red");return}s("click occured on tag div, addNew found","green",o);let i=yield m({selector:".add-new"});s("add new section loaded -> ","green",i),k(i)}))})}function k(a){if(g.tagsAdded=[],s("now attaching tag alert..."),a.hasAttribute("listener"))return s("tag alert found, returning...");a.setAttribute("listener","tagAlert"),a.addEventListener("click",function(n){a.removeAttribute("listener"),oe(n)},{capture:!0,once:!0})}function oe(a){return l(this,null,function*(){var r;s("add new tag click captured","green",a),a.stopPropagation();let t=a.target,n=(r=t.innerText)==null?void 0:r.trim(),o=new v({dialogClass:"tag-confirm-dialog",accept:"Yes",cancel:"No",message:`Are you sure you want to add <span class="tag-add">${n}</span> as a new tag?</div>`,target:t});o.open({dialogClass:"tag-confirm-dialog",accept:"Yes",cancel:"No",message:`Are you sure you want to add <span class="tag-add">${n}</span> as a new tag?</div>`,target:t});let i=yield o.waitForUser();s(`tag add confirmation: ${i} for tag ${n}`,"green"),i&&(g.tagsAdded.push(n),t.click()),setTimeout(h,100)})}function F(){return l(this,null,function*(){let a=yield p(y,3),t=yield p(E,3),n="M9 5l7 7-7 7";for(let o of a){let i=o.querySelector(".cursor-pointer"),r=o.querySelector("svg > path");r&&(g.contactDivTriggers.push(i),r.getAttribute("d")===n&&(s("opening contact div","green",o),o.firstChild.click()),o.setAttribute("data-open","true"),i.addEventListener("click",c=>{o.getAttribute("data-open")==="true"?o.setAttribute("data-open","false"):o.setAttribute("data-open","true")}))}for(let o of t){if(!o.childElementCount)continue;let i=o.querySelector(".cursor-pointer");g.contactDivTriggers.push(o),o.querySelectorAll("svg > path")[1].getAttribute("d")===n&&(s("opening actions div","green",o),o.firstChild.click()),o.setAttribute("data-open","true"),o.addEventListener("click",c=>{o.getAttribute("data-open")==="true"?o.setAttribute("data-open","false"):o.setAttribute("data-open","true")})}})}function U(){return l(this,null,function*(){let a=document.querySelector(".hl_contact-details-left .contact-detail-nav");a||(a=yield m({element:a}));let t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("placeholder","search sections"),t.setAttribute("id","contact-search"),t.className="h-6 basis-36 focus:ring-curious-blue-500 focus:border-curious-blue-500 border border-blue-300 block text-xs  rounded disabled:opacity-50 text-gray-800",a.insertBefore(t,a.children[1]),t.addEventListener("input",n=>l(this,null,function*(){var r;let o=n.target.value;if(!o)return;let i=yield p(y,20);for(let c of i)if((r=c.textContent)!=null&&r.toLowerCase().includes(o.toLowerCase())){c.style.backgroundColor="yellow",c.scrollIntoView({behavior:"smooth",block:"center"});break}else c.style.backgroundColor="transparent"}))})}function G(){return l(this,null,function*(){var r,c;let a=yield m({selector:".form-footer.save"}),t=(r=document.querySelector(".form-footer.save > div"))==null?void 0:r.textContent,n=Number((c=t==null?void 0:t.match(/^\d+/))==null?void 0:c[0]),o=document.querySelector(".form-footer.save > div > button ~ div > button");document.querySelectorAll("a[href], a.back").forEach(u=>{u.addEventListener("click",()=>l(this,null,function*(){if(console.log("trying to exit without saving"),n>0){let d=new v({message:`You have ${n} unsaved changes. Are you sure you want to discard them?`,accept:"Discard",cancel:"Cancel",soundAccept:"https://freesound.org/data/previews/48/48701_4483-lq.mp3",soundOpen:"https://freesound.org/data/previews/48/48701_4483-lq.mp3"}),f=yield d.alert(`You have ${n} unsaved changes. Are you sure you want to discard them?`);typeof f=="boolean"&&f&&d.toggle()}}),{once:!0})})})}W();var g={addressDivs:{},tagsAdded:[],contactDivs:[],contactDivTriggers:[],searchBox:null};function C(){return l(this,null,function*(){s("running contact page customizations","green"),yield F(),yield V(),yield M(),yield H(),yield G()})}function W(){return l(this,null,function*(){s("Starting prospect cue customizations","green"),window.location.pathname.includes("/contacts/detail/")&&(yield C()),window.location.pathname.includes("conversations")&&(s("reloaded to conversations page, checking for add new tag","yellow"),yield h()),window.location.pathname.includes("/opportunities/list")&&(s("reloaded to opportunities list page, checking for add new tag","yellow"),yield h());function a(t){return t instanceof HTMLAnchorElement}window.addEventListener("click",function(n){if(!a(n.target))return;s(`click was on an anchor element: ${n.target.href}`,"yellow");let o=window.location.pathname;setTimeout(()=>l(this,null,function*(){n.target.href.includes("/contacts/detail/")?(yield C(),s("click on contact page, checking for add new tag","yellow")):!o.includes("/contacts/detail/")&&window.location.pathname.includes("/contacts/detail/")?(s("click on contact page, checking for add new tag","yellow"),yield C()):window.location.pathname.includes("/conversations/conversations")?yield h():o.includes("/opportunities/list")&&window.location.pathname.includes("/opportunities/list")&&(yield h())}),500)},!0)})}return Q(ae);})();
//# sourceMappingURL=index.js.map
